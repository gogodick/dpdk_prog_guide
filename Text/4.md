
# 4. 服务核
DPDK使用了服务核的概念，能够在DPDK的lcore动态执行工作。EAL编入了对服务核的支持，EAL提供了相应的API，允许应用控制运行时使用服务核的方式。

服务核的概念是基于服务（需要CPU周期执行的DPDK成员）和服务核（DPDK lcore，任务是运行服务）。服务核概念的意义在于，不需要关心不同的平台和环境，可以配置服务核和服务的映射关系。

举例来说，eventdev包括硬件和软件PMD。软件PMD需要lcore执行调度操作，而硬件PMD不需要。使用服务核时，应用不会直接发现软件做了调度。

请参考文档，获取服务核API的详细信息。

## 4.1. 服务核的初始化
有两种方法在DPDK应用中使用服务核，使用服务coremask，或者使用API动态添加核。最简单的办法是通过EAL的-s coremask参数，会获取DPDK的coremask中任何可用的核，如果服务coremask中也设置了相同bit位，这个核会从DPDK应用lcore改到服务核。

## 4.2. 在核上使能服务
每个注册的服务可以独立的映射到一个服务核，或者一组服务核。在一个核上使能一个服务表示这个核会运行这个服务。在这个核上关闭服务表示这个核会停止运行这个服务。

使用这种方法，可以在每个服务核上分配指定的工作任务，映射N个工作任务到M个服务核。每个服务核轮询在这个核上使能的任务，并且调用函数来运行服务。

## 4.3. 服务核的统计
服务核库能够收集运行时的统计数据，比如服务的调用次数，服务使用的CPU周期。可以动态配置CPU周期的收集，允许任何应用在任何时候测量系统运行的服务。
